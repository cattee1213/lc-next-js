# 生产设备剩余寿命计算流程

## 流程图

```mermaid
graph TD
    A[生产数据更新事件] --> B[创建消息并初始化处理管道]
    B --> C[数据合规性校验]
    
    C --> D{数据是否合规?}
    D -->|是| E[解析设备数据]
    D -->|否| F[记录数据错误并终止流程]
    
    E --> G[计算局部硬件设备剩余寿命]
    G --> H[计算设备组整体剩余寿命]
    
    H --> I{剩余寿命是否低于阈值?}
    I -->|是| J[生成寿命预警通知]
    I -->|否| K[更新设备状态记录]
    
    J --> L[发送报警信息至监控系统]
    K --> M[流程完成]
    
    F --> M
    L --> M
    
    style A fill:#e1f5fe
    style J fill:#ffebee
    style L fill:#ffebee
    style M fill:#e8f5e9
```

## 流程说明

### 1. 消息创建与管道初始化
- 生产数据更新事件触发消息创建
- 初始化处理管道，准备进行后续计算

### 2. 数据合规性校验
- 验证数据格式和完整性
- 检查数据值域是否在合理范围内
- 确认数据时间戳有效性

### 3. 局部硬件设备剩余寿命计算
- 基于设备运行时间、负荷强度等参数
- 应用设备特定寿命模型算法
- 计算单个设备的剩余使用寿命

### 4. 整体设备组剩余寿命计算
- 聚合相关设备的寿命数据
- 考虑设备间的依赖关系和权重
- 计算设备组的整体剩余寿命

### 5. 寿命预警与报警
- 对比预设的预警阈值
- 生成相应级别的预警通知
- 发送报警信息至监控系统和相关人员

## 关键参数说明

| 参数类型 | 说明 |
|---------|------|
| 设备运行数据 | 运行时长、负荷强度、故障次数等 |
| 寿命模型参数 | 设备类型、设计寿命、衰减系数等 |
| 预警阈值 | 警告阈值、严重阈值、临界阈值等 |
| 设备组权重 | 设备在组内的重要性权重系数 |

## 应用场景

此流程适用于：
- 智能制造设备的预测性维护
- 工业生产线的设备健康管理
- 关键设备的寿命监控与预警
- 设备更换和维修计划的决策支持